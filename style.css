/* Importar fuentes de Google Fonts (a√±adido en HTML) */
/* font-family: 'Pacifico', cursive; (para t√≠tulos y mensaje especial) */
/* font-family: 'Quicksand', sans-serif; (para el resto del texto) */

/* Colores Pastel con Profundidad y m√°s saturaci√≥n */
:root {
    --rosa-principal: #FFC0CB; /* Rosa Chicle m√°s vibrante */
    --rosa-sombra: #E0AAB6;    /* Rosa m√°s oscuro para sombras */
    --fondo-degradado-inicio: #fce4ec; /* Rosa muy claro */
    --fondo-degradado-fin: #e1bee7;    /* Lavanda suave */
    --verde-agua: #A7DBD8;     /* Contraste suave y fresco */
    --amarillo-suave: #FFECB3; /* Detalle amarillo para mensaje */
    --ribbon-color: #f796af; /* Un rosa m√°s intenso para lazo */
    --texto-oscuro: #5C4B5C; /* Color de texto m√°s definido */
    /* Nuevos colores para el patr√≥n de puntos */
    --caja-fondo-puntos: #f9d5e5; /* Fondo m√°s p√°lido para la caja */
    --caja-puntos-color: #ffffff; /* Puntos blancos */
}

/* 1. Estilos Generales y Responsividad */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%; 
    /* ‚úÖ Soluci√≥n Scroll: Aunque body tiene overflow: hidden, 
       eliminar los m√°rgenes asegura que 100vh se respete. */
    overflow: hidden; 
}

body {
    font-family: 'Quicksand', sans-serif;
    background: linear-gradient(135deg, var(--fondo-degradado-inicio) 0%, var(--fondo-degradado-fin) 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    /* ‚úÖ Soluci√≥n Scroll: Elimina el padding del body que puede causar scrollbar en 100vh */
    padding: 0; 
}

.birthday-card {
    /* ... (Propiedades de width y position se mantienen) ... */
    width: 90%; 
    position: relative; 
    
    /* 2. Control del Alto para Responsividad */
    min-height: 500px; 
    
    /* Mantenemos 75vh para el margen vertical del 25% */
    max-height: 75vh; 
    
    /* Mantenemos 3/4 (Verticalidad equilibrada) */
    aspect-ratio: 3/4; 
    
    object-fit: contain; 
    overflow: hidden; 
    
    /* 3. Estilos Visuales */
    background: rgba(255, 255, 255, 0.9); 
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2); 

    /* 4. Centrado y Distribuci√≥n de Contenido (Flexbox) */
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
    text-align: center;
}

/* **CLAVE: Nuevo contenedor para los mensajes iniciales** */
.initial-messages-wrapper {
    position: absolute;
    top: 10%; 
    left: 50%;
    transform: translateX(-50%);
    width: 90%; 
    max-width: 400px;
    z-index: 15; 
    opacity: 1; 
    transition: opacity 0.5s ease-out;
    pointer-events: auto; 
    display: flex; 
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* **CLAVE: Ocultar los mensajes iniciales al abrir el regalo** */
#open-gift:checked ~ .initial-messages-wrapper { 
    opacity: 0;
    pointer-events: none;
}

/* Estilos de h1 y subtitle DENTRO del wrapper */
.initial-messages-wrapper h1 { 
    font-family: 'Pacifico', cursive;
    color: var(--texto-oscuro);
    margin-bottom: 5px; 
    font-size: 2.2em;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    position: static; 
    transform: none; 
    width: auto; 
}

.initial-messages-wrapper .subtitle { 
    font-family: 'Quicksand', sans-serif;
    color: #888;
    font-style: italic;
    margin-top: 5px; 
    font-size: 1.1em;
    position: static; 
    transform: none; 
    width: auto; 
}


/* 2. Estilos del Regalo Cerrado (Estado Inicial) */
.gift-box {
    display: block; 
    cursor: pointer;
    position: absolute; 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 250px;
    height: 250px;
    z-index: 10; 
    perspective: 1000px; 
    opacity: 1; 
    transition: opacity 0.6s ease-out 0.3s; 
    pointer-events: auto; 
}

/* La caja entera desaparece despu√©s de abrirse */
#open-gift:checked ~ .gift-box { /* **CAMBIO: de '+' a '~' para que funcione con el nuevo orden HTML** */
    opacity: 0;
    pointer-events: none;
}

/* Estilo de la caja de regalo con puntos como en la foto */
.base, .lid {
    position: absolute;
    width: 100%;
    height: 50%;
    background-color: var(--caja-fondo-puntos); 
    background-image: radial-gradient(var(--caja-puntos-color) 10%, transparent 11%);
    background-size: 25px 25px; 
    border: 1px solid var(--rosa-sombra);
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.25); 
    border-radius: 8px;
    transition: all 0.6s ease-out;
}

.base {
    bottom: 0;
}

.lid {
    top: 0;
    transform-origin: bottom center;
}

.ribbon-v, .ribbon-h {
    position: absolute;
    background: var(--ribbon-color);
    z-index: 5;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.3);
    border-radius: 2px;
    transition: opacity 0.5s ease-out;
}

.ribbon-v {
    width: 25px;
    height: 100%;
    left: 50%;
    transform: translateX(-50%);
}

.ribbon-h {
    width: 100%;
    height: 25px;
    top: 50%;
    transform: translateY(-50%);
}

/* 3. Animaci√≥n de Apertura (El truco CSS) */
/* Estos selectores ahora usan ~ .gift-box porque ya no es hermano adyacente del input, pero si es un hermano general del input*/
#open-gift:checked ~ .gift-box .lid {
    transform: translateY(-120px) rotateX(25deg);
    opacity: 0;
    z-index: 1;
}

#open-gift:checked ~ .gift-box .ribbon-v,
#open-gift:checked ~ .gift-box .ribbon-h {
    opacity: 0;
}

#open-gift:checked ~ .gift-box .base {
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
    opacity: 0; 
}

/* 4. Contenido Sorpresa (Aparece y se posiciona) */
/* **NUEVO CONTENEDOR LABEL para la sorpresa** */
.surprise-reveal-wrapper { 
    position: absolute; 
    top: 0; 
    left: 0;
    width: 100%; 
    height: 100%; 
    opacity: 0; /* Oculto al inicio */
    z-index: 2; /* Por debajo del regalo inicial */
    transition: opacity 1s ease-out 0.6s; /* Aparece DESPU√âS de que la caja desaparezca */
    pointer-events: none; /* Inactivo hasta que se abre */
    cursor: pointer; /* Indica que es clickeable para cerrar */
    
    display: flex;
    flex-direction: column; 
    justify-content: flex-start; 
    align-items: center; 
    overflow: hidden; 
    max-width: 95vw; 
    max-height: 95vh;
}

/* **CLAVE: La sorpresa aparece y es clickeable para cerrar** */
#open-gift:checked ~ .surprise-reveal-wrapper { 
    opacity: 1;
    pointer-events: all; /* Activo al abrir y permite cerrar */
    padding: 20px; 
    overflow-y: auto; 
}

/* El div .surprise-reveal interno ahora solo es el contenedor flex */
.surprise-reveal {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    width: 100%;
    height: 100%; /* Ocupa todo el espacio de su wrapper */
}


.surprise-content-inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px; 
    width: 100%; 
    flex-grow: 1; 
    justify-content: center; 
}

/* Contenedor para la frase (recuadro rojo) */
.message-container {
    width: 100%;
    flex-shrink: 0; 
    height: auto; 
    max-height: 30%; /* La frase ocupa un m√°ximo del 30% del espacio vertical disponible */
    display: flex; 
    justify-content: center;
    align-items: center;
    padding: 0 10px; 
}

/* Contenedor para la frase (recuadro rojo) */
.message-container {
    width: 100%;
    /* Permite que el contenedor no se comprima */
    flex-shrink: 0; 
    height: auto; 
    /* ‚úÖ Soluci√≥n Tama√±o Imagen: Eliminar el max-height: 30% 
       Permite que el mensaje tome SOLO la altura necesaria, dejando m√°s espacio para la imagen (flex-grow: 1). */
    max-height: none; 
    display: flex; 
    justify-content: center;
    align-items: center;
    padding: 0 10px; 
}

/* 2. Contenedor de la Imagen (Permite que crezca y centra) */
.image-container {
    width: 100%;
    /* Permite que el contenedor de la imagen ocupe todo el espacio vertical restante */
    flex-grow: 1; 
    display: flex; 
    /* Centra la imagen horizontal y verticalmente en el espacio restante */
    justify-content: center;
    align-items: center; 
    padding: 10px; 
}

/* 3. Dise√±o de la Foto (Novia) - MODIFICADO para ser M√ÅS GRANDE y SEGURO */
.novia-photo {
    /* üí• SOLUCI√ìN Tama√±o Imagen: Usamos % del ancho de la tarjeta para definir el tama√±o.
       Esto la hace grande, cuadrada, y evita desbordamiento. */
    width: 85%; 
    height: auto; /* Dejar que el aspect-ratio defina el alto. */
    
    /* Mantiene las restricciones m√°ximas de forma responsiva */
    max-width: 95%; 
    max-height: 95%; 
    
    object-fit: contain; 
    border-radius: 0; 
    border: none; 
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); 
    transition: transform 0.3s ease;
    display: block;
    
    /* Asegura la forma cuadrada */
    aspect-ratio: 1 / 1; 
}

.novia-photo:hover {
    transform: scale(1.01); 
}
/* 6. Animaci√≥n del Confeti */
.confetti-container {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; pointer-events: none; z-index: 20;
}
.confetti {
    position: absolute; width: 10px; height: 18px; background: var(--verde-agua); opacity: 0; animation: none; border-radius: 2px;
}
.confetti:nth-child(even) { background: var(--amarillo-suave); }
.confetti:nth-child(odd) { background: var(--rosa-principal); }

/* Activaci√≥n del Confeti al Abrir el Regalo */
#open-gift:checked ~ .gift-box .confetti { /* **CAMBIO: de '+' a '~' para el confeti** */
    opacity: 1;
    animation: fall 3s ease-out forwards;
}

.confetti:nth-child(1) { left: 10%; animation-delay: 0.1s; transform: rotate(20deg); }
.confetti:nth-child(2) { left: 30%; animation-delay: 0.5s; transform: rotate(90deg); }
.confetti:nth-child(3) { left: 50%; animation-delay: 0.3s; transform: rotate(45deg); }
.confetti:nth-child(4) { left: 70%; animation-delay: 0.7s; transform: rotate(120deg); }
.confetti:nth-child(5) { left: 90%; animation-delay: 0.2s; transform: rotate(60deg); }
.confetti:nth-child(6) { left: 20%; animation-delay: 0.6s; transform: rotate(150deg); }
.confetti:nth-child(7) { left: 40%; animation-delay: 0.4s; transform: rotate(30deg); }
.confetti:nth-child(8) { left: 60%; animation-delay: 0.8s; transform: rotate(75deg); }
.confetti:nth-child(9) { left: 80%; animation-delay: 0.0s; transform: rotate(100deg); }
.confetti:nth-child(10) { left: 5%; animation-delay: 0.9s; transform: rotate(0deg); }

@keyframes fall {
    0% { transform: translateY(0px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

/* 7. Media Query para Responsive */
@media (max-width: 768px) { 
    .birthday-card {
        padding: 15px;
        width: 95%;
        min-height: 450px;
        max-width: none; 
    }
    .initial-messages-wrapper { top: 5%; } 
    .initial-messages-wrapper h1 { font-size: 1.8em;}
    .initial-messages-wrapper .subtitle { font-size: 0.9em; }

    .gift-box {
        width: 200px; height: 200px; 
    }
    #open-gift:checked ~ .surprise-reveal-wrapper { 
        padding: 15px;
    }
    .message-container {
        /* Se mantiene una ligera restricci√≥n en mobile para dar prioridad al scroll si el texto es excesivo */
        max-height: 25%; 
    }
    .message { font-size: 1.3em; }
    .novia-photo {
        /* üí• SOLUCI√ìN: Usar % en lugar de vw para que la imagen se restrinja al ancho de la tarjeta (95% en este media query) */
        width: 90%; 
        height: auto; 
        max-width: 350px; 
        max-height: 350px;
        aspect-ratio: 1 / 1; 
    }
}